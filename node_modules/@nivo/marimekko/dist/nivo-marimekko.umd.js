!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("react"),require("@nivo/core"),require("@nivo/axes"),require("@nivo/legends"),require("lodash/get"),require("d3-shape"),require("d3-scale"),require("@nivo/colors"),require("@react-spring/web"),require("@nivo/tooltip"),require("react/jsx-runtime")):"function"==typeof define&&define.amd?define(["exports","react","@nivo/core","@nivo/axes","@nivo/legends","lodash/get","d3-shape","d3-scale","@nivo/colors","@react-spring/web","@nivo/tooltip","react/jsx-runtime"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).nivo=e.nivo||{},e.React,e.nivo,e.nivo,e.nivo,e["lodash/get"],e.d3,e.d3,e.nivo,e["@react-spring/web"],e.nivo,e["react/jsx-runtime"])}(this,(function(e,i,n,o,t,r,a,d,u,s,l,c){"use strict";function h(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=h(r);function v(){return v=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v.apply(this,arguments)}var g={layout:"vertical",offset:"none",outerPadding:0,innerPadding:3,layers:["grid","axes","bars","legends"],enableGridX:!1,enableGridY:!0,colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,animate:!0,motionConfig:"gentle"},m={expand:a.stackOffsetExpand,diverging:a.stackOffsetDiverging,none:a.stackOffsetNone,silouhette:a.stackOffsetSilhouette,wiggle:a.stackOffsetWiggle},p=function(e){var o=e.data,t=e.stacked,r=e.dimensionIds,a=e.valueFormat,d=e.thicknessScale,s=e.dimensionsScale,l=e.colors,c=e.layout,h=e.outerPadding,f=e.innerPadding,g=u.useOrdinalColorScale(l,"id"),m=n.useValueFormatter(a);return i.useMemo((function(){var e=[],i=h;return o.forEach((function(n){var o=d(n.value),a=v({},n,{x:"vertical"===c?i:0,y:"vertical"===c?0:i,width:"vertical"===c?o:0,height:"vertical"===c?0:o,dimensions:[]}),u=[],l=0;i+=o+f,r.forEach((function(e){var i=t.find((function(i){return i.key===e}));if(i){var o=i[n.index],r={id:e,datum:a,value:o[1]-o[0],formattedValue:m(o[1]-o[0]),color:"rgba(0, 0, 0, 0)",x:0,y:0,width:0,height:0},d=s(o[0]),h=s(o[1]);"vertical"===c?(r.x=a.x,r.y=Math.min(d,h),r.width=a.width,r.height=Math.max(d,h)-r.y,u.push(r.y),l+=r.height):(r.x=Math.min(d,h),r.y=a.y,r.width=Math.max(d,h)-r.x,r.height=a.height,u.push(r.x),l+=r.width),r.color=g(r),a.dimensions.push(r)}"vertical"===c?(a.y=Math.min.apply(Math,u),a.height=l):(a.x=Math.min.apply(Math,u),a.width=l)})),e.push(a)})),e}),[o,t,r,d,s,c,h,f,g,m])},x=function(e,o,t){var r=n.useTheme(),a=u.useInheritedColor(o,r);return i.useMemo((function(){var i=[];return e.forEach((function(e){e.dimensions.forEach((function(n){i.push(v({key:e.id+"-"+n.id},n,{borderColor:a(n),borderWidth:t}))}))})),i}),[e,t,a])},b=function(e){var n=e.data,o=e.id,t=e.value,r=e.valueFormat,u=e.dimensions,s=e.layout,l=e.offset,c=e.outerPadding,h=e.innerPadding,v=e.colors,g=e.borderColor,b=e.borderWidth,y=e.width,M=e.height,k=function(e){return i.useMemo((function(){var i={},n=[];return e.forEach((function(e){n.push(e.id),i[e.id]="function"==typeof e.value?e.value:function(i){return f.default(i,e.value,0)}})),{dimensionIds:n,dimensions:i}}),[e])}(u),C=k.dimensionIds,w=function(e,n,o){return i.useMemo((function(){var i=m[o];return a.stack().keys(e).value((function(e,i){return n[i](e)})).offset(i)}),[e,n,o])}(C,k.dimensions,l),j=function(e,n){return i.useMemo((function(){var i=e(n),o=[];return i.forEach((function(e){e.forEach((function(e){o.push(e[0]),o.push(e[1])}))})),{stacked:i,min:Math.min.apply(Math,o),max:Math.max.apply(Math,o)}}),[e,n])}(w,n),P=j.stacked,S=j.min,I=j.max,E=function(e,n,o){var t="function"==typeof n?n:function(e){return f.default(e,n)},r="function"==typeof o?o:function(e){return f.default(e,o,0)};return i.useMemo((function(){var i=[];return e.forEach((function(e,n){var o=t(e),a=r(e);i.push({index:n,id:o,value:a,data:e})})),i}),[e,t,r])}(n,o,t),W=function(e){var n=e.data,o=e.width,t=e.height,r=e.layout,a=e.outerPadding,u=e.innerPadding;return i.useMemo((function(){var e=n.reduce((function(e,i){return e+i.value}),0),i=d.scaleLinear().domain([0,e]),s=2*a+(n.length-1)*u;return"vertical"===r?i.range([0,o-s]):i.range([0,t-s]),i}),[n,o,t,r])}({data:E,width:y,height:M,layout:s,outerPadding:c,innerPadding:h}),O=function(e,n,o,t,r){return i.useMemo((function(){return"vertical"===r?d.scaleLinear().domain([n,e]).range([0,t]):d.scaleLinear().domain([e,n]).range([0,o])}),[e,n,o,t,r])}(S,I,y,M,s),q=p({data:E,stacked:P,dimensionIds:C,valueFormat:r,thicknessScale:W,dimensionsScale:O,colors:v,layout:s,outerPadding:c,innerPadding:h});return{computedData:q,bars:x(q,g,b),thicknessScale:W,dimensionsScale:O,dimensionIds:C}},y=function(e){var n,o=e.bar,t=e.animatedProps,r=e.isInteractive,a=e.tooltip,d=e.onClick,u=e.onMouseEnter,h=e.onMouseMove,f=e.onMouseLeave,v=l.useTooltip(),g=v.showTooltipFromEvent,m=v.hideTooltip,p=i.useCallback((function(e){return g(i.createElement(a,{bar:o}),e)}),[g,a,o]),x=i.useCallback((function(e){null==d||d(o,e)}),[d,o]),b=i.useCallback((function(e){null==u||u(o,e),p(e)}),[p,o]),y=i.useCallback((function(e){null==h||h(o,e),p(e)}),[p,o]),M=i.useCallback((function(e){null==f||f(o,e),m()}),[f,o,m]);return c.jsx(s.animated.rect,{x:t.x,y:t.y,width:s.to(t.width,(function(e){return Math.max(e,0)})),height:s.to(t.height,(function(e){return Math.max(e,0)})),fill:null!=(n=o.fill)?n:t.color,stroke:t.borderColor,strokeWidth:o.borderWidth,onClick:r?x:void 0,onMouseEnter:r?b:void 0,onMouseMove:r?y:void 0,onMouseLeave:r?M:void 0})},M=function(e){var i=e.bars,o=e.isInteractive,t=e.tooltip,r=e.onClick,a=e.onMouseEnter,d=e.onMouseMove,u=e.onMouseLeave,l=n.useMotionConfig(),h=l.animate,f=l.config,v=s.useTransition(i,{keys:function(e){return e.key},initial:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:1,borderColor:e.borderColor}},from:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:0,borderColor:e.borderColor}},enter:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:1,borderColor:e.borderColor}},update:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:1,borderColor:e.borderColor}},leave:function(e){return{opacity:0,x:e.x,y:e.y,width:e.width,height:e.height,color:e.color}},config:f,immediate:!h});return c.jsx(c.Fragment,{children:v((function(e,i){return c.jsx(y,{bar:i,animatedProps:e,isInteractive:o,tooltip:t,onClick:r,onMouseEnter:a,onMouseMove:d,onMouseLeave:u},i.key)}))})},k=function(e){var i=e.bar;return c.jsx(l.BasicTooltip,{id:i.datum.id+" - "+i.id,value:i.formattedValue,enableChip:!0,color:i.color})},C=["isInteractive","animate","motionConfig"],w=function(e){var r=e.data,a=e.id,d=e.value,u=e.valueFormat,s=e.dimensions,l=e.width,h=e.height,f=e.margin,m=e.layout,p=void 0===m?g.layout:m,x=e.offset,y=void 0===x?g.offset:x,C=e.outerPadding,w=void 0===C?g.outerPadding:C,j=e.innerPadding,P=void 0===j?g.innerPadding:j,S=e.layers,I=void 0===S?g.layers:S,E=e.axisTop,W=e.axisRight,O=e.axisBottom,q=e.axisLeft,L=e.enableGridX,F=void 0===L?g.enableGridX:L,T=e.gridXValues,G=e.enableGridY,V=void 0===G?g.enableGridY:G,D=e.gridYValues,B=e.colors,R=void 0===B?g.colors:B,X=e.defs,Y=void 0===X?[]:X,H=e.fill,_=void 0===H?[]:H,A=e.borderWidth,N=void 0===A?g.borderWidth:A,z=e.borderColor,J=void 0===z?g.borderColor:z,K=e.isInteractive,Q=void 0===K?g.isInteractive:K,U=e.tooltip,Z=void 0===U?k:U,$=e.onClick,ee=e.onMouseEnter,ie=e.onMouseMove,ne=e.onMouseLeave,oe=e.legends,te=void 0===oe?[]:oe,re=e.role,ae=n.useDimensions(l,h,f),de=ae.outerWidth,ue=ae.outerHeight,se=ae.margin,le=ae.innerWidth,ce=ae.innerHeight,he=b({data:r,id:a,value:d,dimensions:s,valueFormat:u,layout:p,offset:y,outerPadding:w,innerPadding:P,colors:R,borderColor:J,borderWidth:N,width:le,height:ce}),fe=he.computedData,ve=he.bars,ge=he.thicknessScale,me=he.dimensionsScale,pe=he.dimensionIds,xe={grid:null,axes:null,bars:null,legends:null},be=n.bindDefs(Y,ve,_);I.includes("bars")&&(xe.bars=c.jsx(M,{bars:ve,isInteractive:Q,tooltip:Z,onClick:$,onMouseEnter:ee,onMouseMove:ie,onMouseLeave:ne},"bars"));var ye="vertical"===p?ge:me,Me="vertical"===p?me:ge;I.includes("grid")&&(xe.grid=c.jsx(o.Grid,{xScale:F?ye:void 0,yScale:V?Me:void 0,width:le,height:ce,xValues:T,yValues:D},"grid")),I.includes("axes")&&(xe.axes=c.jsx(o.Axes,{xScale:ye,yScale:Me,width:le,height:ce,top:E,right:W,bottom:O,left:q},"axes"));var ke=function(e,i){var n=[];return e.forEach((function(e){var o=i.find((function(i){return i.id===e}));o&&n.push({id:e,label:e,color:o.color,fill:o.fill})})),n}(pe,ve);I.includes("legends")&&(xe.legends=c.jsx("g",{children:te.map((function(e,i){return c.jsx(t.BoxLegendSvg,v({},e,{containerWidth:le,containerHeight:ce,data:ke}),i)}))},"legends"));var Ce=function(e){var n=e.data,o=e.bars,t=e.thicknessScale,r=e.dimensionsScale;return i.useMemo((function(){return{data:n,bars:o,thicknessScale:t,dimensionsScale:r}}),[n,o,t,r])}({data:fe,bars:ve,thicknessScale:ge,dimensionsScale:me});return c.jsx(n.SvgWrapper,{width:de,height:ue,margin:se,defs:be,role:re,children:I.map((function(e,n){return void 0!==xe[e]?xe[e]:"function"==typeof e?c.jsx(i.Fragment,{children:i.createElement(e,Ce)},n):null}))})},j=function(e){var i=e.isInteractive,o=void 0===i?g.isInteractive:i,t=e.animate,r=void 0===t?g.animate:t,a=e.motionConfig,d=void 0===a?g.motionConfig:a,u=function(e,i){if(null==e)return{};var n,o,t={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],i.indexOf(n)>=0||(t[n]=e[n]);return t}(e,C);return c.jsx(n.Container,{theme:u.theme,isInteractive:o,animate:r,motionConfig:d,children:c.jsx(w,v({isInteractive:o,animate:r,motionConfig:d},u))})};e.Marimekko=j,e.ResponsiveMarimekko=function(e){return c.jsx(n.ResponsiveWrapper,{children:function(i){var n=i.width,o=i.height;return c.jsx(j,v({width:n,height:o},e))}})},e.defaultProps=g,e.offsetById=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=nivo-marimekko.umd.js.map
