"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),i=require("@nivo/core"),n=require("@nivo/axes"),o=require("@nivo/legends"),t=require("lodash/get"),r=require("d3-shape"),a=require("d3-scale"),d=require("@nivo/colors"),u=require("@react-spring/web"),s=require("@nivo/tooltip"),l=require("react/jsx-runtime");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var h=c(t);function f(){return f=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f.apply(this,arguments)}var v={layout:"vertical",offset:"none",outerPadding:0,innerPadding:3,layers:["grid","axes","bars","legends"],enableGridX:!1,enableGridY:!0,colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,animate:!0,motionConfig:"gentle"},g={expand:r.stackOffsetExpand,diverging:r.stackOffsetDiverging,none:r.stackOffsetNone,silouhette:r.stackOffsetSilhouette,wiggle:r.stackOffsetWiggle},m=function(n){var o=n.data,t=n.stacked,r=n.dimensionIds,a=n.valueFormat,u=n.thicknessScale,s=n.dimensionsScale,l=n.colors,c=n.layout,h=n.outerPadding,v=n.innerPadding,g=d.useOrdinalColorScale(l,"id"),m=i.useValueFormatter(a);return e.useMemo((function(){var e=[],i=h;return o.forEach((function(n){var o=u(n.value),a=f({},n,{x:"vertical"===c?i:0,y:"vertical"===c?0:i,width:"vertical"===c?o:0,height:"vertical"===c?0:o,dimensions:[]}),d=[],l=0;i+=o+v,r.forEach((function(e){var i=t.find((function(i){return i.key===e}));if(i){var o=i[n.index],r={id:e,datum:a,value:o[1]-o[0],formattedValue:m(o[1]-o[0]),color:"rgba(0, 0, 0, 0)",x:0,y:0,width:0,height:0},u=s(o[0]),h=s(o[1]);"vertical"===c?(r.x=a.x,r.y=Math.min(u,h),r.width=a.width,r.height=Math.max(u,h)-r.y,d.push(r.y),l+=r.height):(r.x=Math.min(u,h),r.y=a.y,r.width=Math.max(u,h)-r.x,r.height=a.height,d.push(r.x),l+=r.width),r.color=g(r),a.dimensions.push(r)}"vertical"===c?(a.y=Math.min.apply(Math,d),a.height=l):(a.x=Math.min.apply(Math,d),a.width=l)})),e.push(a)})),e}),[o,t,r,u,s,c,h,v,g,m])},p=function(n,o,t){var r=i.useTheme(),a=d.useInheritedColor(o,r);return e.useMemo((function(){var e=[];return n.forEach((function(i){i.dimensions.forEach((function(n){e.push(f({key:i.id+"-"+n.id},n,{borderColor:a(n),borderWidth:t}))}))})),e}),[n,t,a])},x=function(i){var n=i.data,o=i.id,t=i.value,d=i.valueFormat,u=i.dimensions,s=i.layout,l=i.offset,c=i.outerPadding,f=i.innerPadding,v=i.colors,x=i.borderColor,y=i.borderWidth,b=i.width,M=i.height,k=function(i){return e.useMemo((function(){var e={},n=[];return i.forEach((function(i){n.push(i.id),e[i.id]="function"==typeof i.value?i.value:function(e){return h.default(e,i.value,0)}})),{dimensionIds:n,dimensions:e}}),[i])}(u),C=k.dimensionIds,w=function(i,n,o){return e.useMemo((function(){var e=g[o];return r.stack().keys(i).value((function(e,i){return n[i](e)})).offset(e)}),[i,n,o])}(C,k.dimensions,l),P=function(i,n){return e.useMemo((function(){var e=i(n),o=[];return e.forEach((function(e){e.forEach((function(e){o.push(e[0]),o.push(e[1])}))})),{stacked:e,min:Math.min.apply(Math,o),max:Math.max.apply(Math,o)}}),[i,n])}(w,n),S=P.stacked,j=P.min,I=P.max,E=function(i,n,o){var t="function"==typeof n?n:function(e){return h.default(e,n)},r="function"==typeof o?o:function(e){return h.default(e,o,0)};return e.useMemo((function(){var e=[];return i.forEach((function(i,n){var o=t(i),a=r(i);e.push({index:n,id:o,value:a,data:i})})),e}),[i,t,r])}(n,o,t),W=function(i){var n=i.data,o=i.width,t=i.height,r=i.layout,d=i.outerPadding,u=i.innerPadding;return e.useMemo((function(){var e=n.reduce((function(e,i){return e+i.value}),0),i=a.scaleLinear().domain([0,e]),s=2*d+(n.length-1)*u;return"vertical"===r?i.range([0,o-s]):i.range([0,t-s]),i}),[n,o,t,r])}({data:E,width:b,height:M,layout:s,outerPadding:c,innerPadding:f}),O=function(i,n,o,t,r){return e.useMemo((function(){return"vertical"===r?a.scaleLinear().domain([n,i]).range([0,t]):a.scaleLinear().domain([i,n]).range([0,o])}),[i,n,o,t,r])}(j,I,b,M,s),q=m({data:E,stacked:S,dimensionIds:C,valueFormat:d,thicknessScale:W,dimensionsScale:O,colors:v,layout:s,outerPadding:c,innerPadding:f});return{computedData:q,bars:p(q,x,y),thicknessScale:W,dimensionsScale:O,dimensionIds:C}},y=function(i){var n,o=i.bar,t=i.animatedProps,r=i.isInteractive,a=i.tooltip,d=i.onClick,c=i.onMouseEnter,h=i.onMouseMove,f=i.onMouseLeave,v=s.useTooltip(),g=v.showTooltipFromEvent,m=v.hideTooltip,p=e.useCallback((function(i){return g(e.createElement(a,{bar:o}),i)}),[g,a,o]),x=e.useCallback((function(e){null==d||d(o,e)}),[d,o]),y=e.useCallback((function(e){null==c||c(o,e),p(e)}),[p,o]),b=e.useCallback((function(e){null==h||h(o,e),p(e)}),[p,o]),M=e.useCallback((function(e){null==f||f(o,e),m()}),[f,o,m]);return l.jsx(u.animated.rect,{x:t.x,y:t.y,width:u.to(t.width,(function(e){return Math.max(e,0)})),height:u.to(t.height,(function(e){return Math.max(e,0)})),fill:null!=(n=o.fill)?n:t.color,stroke:t.borderColor,strokeWidth:o.borderWidth,onClick:r?x:void 0,onMouseEnter:r?y:void 0,onMouseMove:r?b:void 0,onMouseLeave:r?M:void 0})},b=function(e){var n=e.bars,o=e.isInteractive,t=e.tooltip,r=e.onClick,a=e.onMouseEnter,d=e.onMouseMove,s=e.onMouseLeave,c=i.useMotionConfig(),h=c.animate,f=c.config,v=u.useTransition(n,{keys:function(e){return e.key},initial:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:1,borderColor:e.borderColor}},from:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:0,borderColor:e.borderColor}},enter:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:1,borderColor:e.borderColor}},update:function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,opacity:1,borderColor:e.borderColor}},leave:function(e){return{opacity:0,x:e.x,y:e.y,width:e.width,height:e.height,color:e.color}},config:f,immediate:!h});return l.jsx(l.Fragment,{children:v((function(e,i){return l.jsx(y,{bar:i,animatedProps:e,isInteractive:o,tooltip:t,onClick:r,onMouseEnter:a,onMouseMove:d,onMouseLeave:s},i.key)}))})},M=function(e){var i=e.bar;return l.jsx(s.BasicTooltip,{id:i.datum.id+" - "+i.id,value:i.formattedValue,enableChip:!0,color:i.color})},k=["isInteractive","animate","motionConfig"],C=function(t){var r=t.data,a=t.id,d=t.value,u=t.valueFormat,s=t.dimensions,c=t.width,h=t.height,g=t.margin,m=t.layout,p=void 0===m?v.layout:m,y=t.offset,k=void 0===y?v.offset:y,C=t.outerPadding,w=void 0===C?v.outerPadding:C,P=t.innerPadding,S=void 0===P?v.innerPadding:P,j=t.layers,I=void 0===j?v.layers:j,E=t.axisTop,W=t.axisRight,O=t.axisBottom,q=t.axisLeft,L=t.enableGridX,F=void 0===L?v.enableGridX:L,G=t.gridXValues,T=t.enableGridY,V=void 0===T?v.enableGridY:T,D=t.gridYValues,B=t.colors,X=void 0===B?v.colors:B,Y=t.defs,H=void 0===Y?[]:Y,R=t.fill,_=void 0===R?[]:R,A=t.borderWidth,N=void 0===A?v.borderWidth:A,z=t.borderColor,J=void 0===z?v.borderColor:z,K=t.isInteractive,Q=void 0===K?v.isInteractive:K,U=t.tooltip,Z=void 0===U?M:U,$=t.onClick,ee=t.onMouseEnter,ie=t.onMouseMove,ne=t.onMouseLeave,oe=t.legends,te=void 0===oe?[]:oe,re=t.role,ae=i.useDimensions(c,h,g),de=ae.outerWidth,ue=ae.outerHeight,se=ae.margin,le=ae.innerWidth,ce=ae.innerHeight,he=x({data:r,id:a,value:d,dimensions:s,valueFormat:u,layout:p,offset:k,outerPadding:w,innerPadding:S,colors:X,borderColor:J,borderWidth:N,width:le,height:ce}),fe=he.computedData,ve=he.bars,ge=he.thicknessScale,me=he.dimensionsScale,pe=he.dimensionIds,xe={grid:null,axes:null,bars:null,legends:null},ye=i.bindDefs(H,ve,_);I.includes("bars")&&(xe.bars=l.jsx(b,{bars:ve,isInteractive:Q,tooltip:Z,onClick:$,onMouseEnter:ee,onMouseMove:ie,onMouseLeave:ne},"bars"));var be="vertical"===p?ge:me,Me="vertical"===p?me:ge;I.includes("grid")&&(xe.grid=l.jsx(n.Grid,{xScale:F?be:void 0,yScale:V?Me:void 0,width:le,height:ce,xValues:G,yValues:D},"grid")),I.includes("axes")&&(xe.axes=l.jsx(n.Axes,{xScale:be,yScale:Me,width:le,height:ce,top:E,right:W,bottom:O,left:q},"axes"));var ke=function(e,i){var n=[];return e.forEach((function(e){var o=i.find((function(i){return i.id===e}));o&&n.push({id:e,label:e,color:o.color,fill:o.fill})})),n}(pe,ve);I.includes("legends")&&(xe.legends=l.jsx("g",{children:te.map((function(e,i){return l.jsx(o.BoxLegendSvg,f({},e,{containerWidth:le,containerHeight:ce,data:ke}),i)}))},"legends"));var Ce=function(i){var n=i.data,o=i.bars,t=i.thicknessScale,r=i.dimensionsScale;return e.useMemo((function(){return{data:n,bars:o,thicknessScale:t,dimensionsScale:r}}),[n,o,t,r])}({data:fe,bars:ve,thicknessScale:ge,dimensionsScale:me});return l.jsx(i.SvgWrapper,{width:de,height:ue,margin:se,defs:ye,role:re,children:I.map((function(i,n){return void 0!==xe[i]?xe[i]:"function"==typeof i?l.jsx(e.Fragment,{children:e.createElement(i,Ce)},n):null}))})},w=function(e){var n=e.isInteractive,o=void 0===n?v.isInteractive:n,t=e.animate,r=void 0===t?v.animate:t,a=e.motionConfig,d=void 0===a?v.motionConfig:a,u=function(e,i){if(null==e)return{};var n,o,t={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],i.indexOf(n)>=0||(t[n]=e[n]);return t}(e,k);return l.jsx(i.Container,{theme:u.theme,isInteractive:o,animate:r,motionConfig:d,children:l.jsx(C,f({isInteractive:o,animate:r,motionConfig:d},u))})};exports.Marimekko=w,exports.ResponsiveMarimekko=function(e){return l.jsx(i.ResponsiveWrapper,{children:function(i){var n=i.width,o=i.height;return l.jsx(w,f({width:n,height:o},e))}})},exports.defaultProps=v,exports.offsetById=g;
//# sourceMappingURL=nivo-marimekko.cjs.js.map
