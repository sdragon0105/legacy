"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@nivo/axes"),a=require("@nivo/annotations"),t=require("react/jsx-runtime"),i=require("@nivo/legends"),n=require("@nivo/core"),r=require("react"),o=require("@react-spring/web"),l=require("@nivo/tooltip"),d=require("@nivo/colors"),u=require("@nivo/scales"),s=require("d3-shape");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var h=c(require("lodash/uniqBy"));function b(){return b=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b.apply(this,arguments)}function g(e,a){if(null==e)return{};var t,i,n={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],a.indexOf(t)>=0||(n[t]=e[t]);return n}var v,f=function(e){var i=e.bars,n=e.annotations,r=a.useAnnotations({data:i,annotations:n,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var a=e.height,t=e.width;return{width:t,height:a,size:Math.max(t,a)}}});return t.jsx(t.Fragment,{children:r.map((function(e,i){return t.jsx(a.Annotation,b({},e),i)}))})},m=function(e){var a=e.width,n=e.height,r=e.legends,o=e.toggleSerie;return t.jsx(t.Fragment,{children:r.map((function(e,r){var l,d=e[0],u=e[1];return t.jsx(i.BoxLegendSvg,b({},d,{containerWidth:a,containerHeight:n,data:null!=(l=d.data)?l:u,toggleSerie:d.toggleSerie&&"keys"===d.dataFrom?o:void 0}),r)}))})},x=["data"],p=function(e){var a,i=e.bar,d=i.data,u=g(i,x),s=e.style,c=s.borderColor,h=s.color,v=s.height,f=s.labelColor,m=s.labelOpacity,p=s.labelX,y=s.labelY,S=s.transform,k=s.width,C=e.borderRadius,L=e.borderWidth,w=e.label,V=e.shouldRenderLabel,M=e.isInteractive,B=e.onClick,W=e.onMouseEnter,T=e.onMouseLeave,I=e.tooltip,R=e.isFocusable,j=e.ariaLabel,P=e.ariaLabelledBy,E=e.ariaDescribedBy,F=n.useTheme(),H=l.useTooltip(),A=H.showTooltipFromEvent,D=H.showTooltipAt,X=H.hideTooltip,Y=r.useMemo((function(){return function(){return r.createElement(I,b({},u,d))}}),[I,u,d]),q=r.useCallback((function(e){null==B||B(b({color:u.color},d),e)}),[u,d,B]),O=r.useCallback((function(e){return A(Y(),e)}),[A,Y]),G=r.useCallback((function(e){null==W||W(d,e),A(Y(),e)}),[d,W,A,Y]),z=r.useCallback((function(e){null==T||T(d,e),X()}),[d,X,T]),K=r.useCallback((function(){D(Y(),[u.absX+u.width/2,u.absY])}),[D,Y,u]),N=r.useCallback((function(){X()}),[X]);return t.jsxs(o.animated.g,{transform:S,children:[t.jsx(o.animated.rect,{width:o.to(k,(function(e){return Math.max(e,0)})),height:o.to(v,(function(e){return Math.max(e,0)})),rx:C,ry:C,fill:null!=(a=d.fill)?a:h,strokeWidth:L,stroke:c,focusable:R,tabIndex:R?0:void 0,"aria-label":j?j(d):void 0,"aria-labelledby":P?P(d):void 0,"aria-describedby":E?E(d):void 0,onMouseEnter:M?G:void 0,onMouseMove:M?O:void 0,onMouseLeave:M?z:void 0,onClick:M?q:void 0,onFocus:M&&R?K:void 0,onBlur:M&&R?N:void 0}),V&&t.jsx(o.animated.text,{x:p,y:y,textAnchor:"middle",dominantBaseline:"central",fillOpacity:m,style:b({},F.labels.text,{pointerEvents:"none",fill:f}),children:w})]})},y=["color","label"],S={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:function(e){var a=e.color,i=e.label,n=g(e,y);return t.jsx(l.BasicTooltip,{id:i,value:n.formattedValue,enableChip:!0,color:a})},tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[]},k=b({},S,{layers:["grid","axes","bars","markers","legends","annotations"],barComponent:p,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),C=b({},S,{layers:["grid","axes","bars","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(v=window.devicePixelRatio)?v:1}),L=function(e,a,t,i,n,r){return u.computeScale(i,{all:e.map(a),min:0,max:0},n,r).padding(t)},w=function(e,a){return e.map((function(e){return b({},a.reduce((function(e,a){return e[a]=null,e}),{}),e)}))},V=function(e){return Object.keys(e).reduce((function(a,t){return e[t]&&(a[t]=e[t]),a}),{})},M=function(e){return[e,Number(e)]},B=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],W=function(e,a){return e>a},T=function(e,a){return e<a},I=function(e,a){return Array.from(" ".repeat(a-e),(function(a,t){return e+t}))},R=function(e){return W(e,0)?0:e},j=function(e,a,t,i){var n=e.data,r=e.formatValue,o=e.getColor,l=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,s=void 0===u?0:u,c=e.keys,h=e.xScale,b=e.yScale,g=e.margin,v=t?T:W,f=n.map(V),m=[];return c.forEach((function(e,t){return I(0,h.domain().length).forEach((function(u){var c,x,p,y=M(n[u][e]),S=y[0],k=y[1],C=l(n[u]),L=(null!=(c=h(C))?c:0)+a*t+s*t,w=v(x=k,0)?null!=(p=b(x))?p:0:i,V=function(e,a){var t;return v(e,0)?i-a:(null!=(t=b(e))?t:0)-i}(k,w),B={id:e,value:null===S?S:k,formattedValue:r(k),hidden:!1,index:u,indexValue:C,data:f[u]};m.push({key:e+"."+B.indexValue,index:m.length,data:B,x:L,y:w,absX:g.left+L,absY:g.top+w,width:a,height:V,color:o(B),label:d(B)})}))})),m},P=function(e,a,t,i){var n=e.data,r=e.formatValue,o=e.getIndex,l=e.getColor,d=e.getTooltipLabel,u=e.keys,s=e.innerPadding,c=void 0===s?0:s,h=e.xScale,b=e.yScale,g=e.margin,v=t?T:W,f=n.map(V),m=[];return u.forEach((function(e,t){return I(0,b.domain().length).forEach((function(u){var s,x,p,y=M(n[u][e]),S=y[0],k=y[1],C=o(n[u]),L=v(x=k,0)?i:null!=(p=h(x))?p:0,w=(null!=(s=b(C))?s:0)+a*t+c*t,V=function(e,a){var t;return v(e,0)?(null!=(t=h(e))?t:0)-i:i-a}(k,L),B={id:e,value:null===S?S:k,formattedValue:r(k),hidden:!1,index:u,indexValue:C,data:f[u]};m.push({key:e+"."+B.indexValue,index:m.length,data:B,x:L,y:w,absX:g.left+L,absY:g.top+w,width:V,height:a,color:l(B),label:d(B)})}))})),m},E=function(e){var a,t,i=e.layout,n=e.minValue,r=e.maxValue,o=e.reverse,l=e.width,d=e.height,s=e.padding,c=void 0===s?0:s,h=e.innerPadding,v=void 0===h?0:h,f=e.valueScale,m=e.indexScale,x=e.hiddenIds,p=void 0===x?[]:x,y=g(e,B),S=y.keys.filter((function(e){return!p.includes(e)})),k=w(y.data,S),C="vertical"===i?["y","x",l]:["x","y",d],V=C[0],M=C[1],W=C[2],T=L(k,y.getIndex,c,m,W,M),I=b({max:r,min:n,reverse:o},f),E="auto"===I.min?R:function(e){return e},F=k.reduce((function(e,a){return[].concat(e,S.map((function(e){return a[e]})))}),[]).filter(Boolean),H=E(Math.min.apply(Math,F)),A=(t=Math.max.apply(Math,F),isFinite(t)?t:0),D=u.computeScale(I,{all:F,min:H,max:A},"x"===V?l:d,V),X="vertical"===i?[T,D]:[D,T],Y=X[0],q=X[1],O=(T.bandwidth()-v*(S.length-1))/S.length,G=[b({},y,{data:k,keys:S,innerPadding:v,xScale:Y,yScale:q}),O,I.reverse,null!=(a=D(0))?a:0];return{xScale:Y,yScale:q,bars:O>0?"vertical"===i?j.apply(void 0,G):P.apply(void 0,G):[]}},F=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],H=function e(a){var t;return a.some(Array.isArray)?e((t=[]).concat.apply(t,a)):a},A=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,o=e.getTooltipLabel,l=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,b){var g,v,f=e[b],m=null!=(g=u(r(f.data)))?g:0,x=(null!=(v=function(e){return s(e[t?0:1])}(f))?v:0)+.5*l,p=function(e,a){var i;return(null!=(i=s(e[t?1:0]))?i:0)-a}(f,x)-l,y=M(f.data[e.key]),S=y[0],k=y[1],C={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:b,indexValue:d,data:V(f.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:m,y:x,absX:c.left+m,absY:c.top+x,width:a,height:p,color:n(C),label:o(C)})}))})),h},D=function(e,a,t){var i=e.formatValue,n=e.getColor,r=e.getIndex,o=e.getTooltipLabel,l=e.innerPadding,d=e.stackedData,u=e.xScale,s=e.yScale,c=e.margin,h=[];return d.forEach((function(e){return s.domain().forEach((function(d,b){var g,v,f=e[b],m=null!=(g=s(r(f.data)))?g:0,x=(null!=(v=function(e){return u(e[t?1:0])}(f))?v:0)+.5*l,p=function(e,a){var i;return(null!=(i=u(e[t?0:1]))?i:0)-a}(f,x)-l,y=M(f.data[e.key]),S=y[0],k=y[1],C={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:b,indexValue:d,data:V(f.data)};h.push({key:e.key+"."+d,index:h.length,data:C,x:x,y:m,absX:c.left+x,absY:c.top+m,width:p,height:a,color:n(C),label:o(C)})}))})),h},X=function(e){var a,t=e.data,i=e.layout,n=e.minValue,r=e.maxValue,o=e.reverse,l=e.width,d=e.height,c=e.padding,h=void 0===c?0:c,v=e.valueScale,f=e.indexScale,m=e.hiddenIds,x=void 0===m?[]:m,p=g(e,F),y=p.keys.filter((function(e){return!x.includes(e)})),S=s.stack().keys(y).offset(s.stackOffsetDiverging)(w(t,y)),k="vertical"===i?["y","x",l]:["x","y",d],C=k[0],V=k[1],M=k[2],B=L(t,p.getIndex,h,f,M,V),W=b({max:r,min:n,reverse:o},v),T=(a=H(S),"log"===v.type?a.filter((function(e){return 0!==e})):a),I=Math.min.apply(Math,T),R=Math.max.apply(Math,T),j=u.computeScale(W,{all:T,min:I,max:R},"x"===C?l:d,C),P="vertical"===i?[B,j]:[j,B],E=P[0],X=P[1],Y=p.innerPadding>0?p.innerPadding:0,q=B.bandwidth(),O=[b({},p,{innerPadding:Y,stackedData:S,xScale:E,yScale:X}),q,W.reverse];return{xScale:E,yScale:X,bars:q>0?"vertical"===i?A.apply(void 0,O):D.apply(void 0,O):[]}},Y=function(e){var a=e.bars,t=e.direction,i=e.from,r=e.groupMode,o=e.layout,l=e.legendLabel,d=e.reverse,u=n.getPropertyAccessor(null!=l?l:"indexes"===i?"indexValue":"id");return"indexes"===i?function(e,a,t){var i=h.default(e.map((function(e){var a,i;return{id:null!=(a=e.data.indexValue)?a:"",label:t(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===a&&i.reverse(),i}(a,o,u):function(e,a,t,i,n,r){var o=h.default(e.map((function(e){var a;return{id:e.data.id,label:r(e.data),hidden:e.data.hidden,color:null!=(a=e.color)?a:"#000"}})),(function(e){return e.id}));return("vertical"===a&&"stacked"===i&&"column"===t&&!0!==n||"horizontal"===a&&"stacked"===i&&!0===n)&&o.reverse(),o}(a,o,t,r,d,u)},q=function(e){var a=e.indexBy,t=void 0===a?S.indexBy:a,i=e.keys,o=void 0===i?S.keys:i,l=e.label,u=void 0===l?S.label:l,s=e.tooltipLabel,c=void 0===s?S.tooltipLabel:s,h=e.valueFormat,g=e.colors,v=void 0===g?S.colors:g,f=e.colorBy,m=void 0===f?S.colorBy:f,x=e.borderColor,p=void 0===x?S.borderColor:x,y=e.labelTextColor,k=void 0===y?S.labelTextColor:y,C=e.groupMode,L=void 0===C?S.groupMode:C,w=e.layout,V=void 0===w?S.layout:w,M=e.reverse,B=void 0===M?S.reverse:M,W=e.data,T=e.minValue,I=void 0===T?S.minValue:T,R=e.maxValue,j=void 0===R?S.maxValue:R,P=e.margin,F=e.width,H=e.height,A=e.padding,D=void 0===A?S.padding:A,q=e.innerPadding,O=void 0===q?S.innerPadding:q,G=e.valueScale,z=void 0===G?S.valueScale:G,K=e.indexScale,N=void 0===K?S.indexScale:K,_=e.initialHiddenIds,J=void 0===_?S.initialHiddenIds:_,Q=e.enableLabel,U=void 0===Q?S.enableLabel:Q,Z=e.labelSkipWidth,$=void 0===Z?S.labelSkipWidth:Z,ee=e.labelSkipHeight,ae=void 0===ee?S.labelSkipHeight:ee,te=e.legends,ie=void 0===te?S.legends:te,ne=e.legendLabel,re=r.useState(null!=J?J:[]),oe=re[0],le=re[1],de=r.useCallback((function(e){le((function(a){return a.indexOf(e)>-1?a.filter((function(a){return a!==e})):[].concat(a,[e])}))}),[]),ue=n.usePropertyAccessor(t),se=n.usePropertyAccessor(u),ce=n.usePropertyAccessor(c),he=n.useValueFormatter(h),be=n.useTheme(),ge=d.useOrdinalColorScale(v,m),ve=d.useInheritedColor(p,be),fe=d.useInheritedColor(k,be),me=("grouped"===L?E:X)({layout:V,reverse:B,data:W,getIndex:ue,keys:o,minValue:I,maxValue:j,width:F,height:H,getColor:ge,padding:D,innerPadding:O,valueScale:z,indexScale:N,hiddenIds:oe,formatValue:he,getTooltipLabel:ce,margin:P}),xe=me.bars,pe=me.xScale,ye=me.yScale,Se=r.useMemo((function(){return xe.filter((function(e){return null!==e.data.value})).map((function(e,a){return b({},e,{index:a})}))}),[xe]),ke=r.useCallback((function(e){var a=e.width,t=e.height;return!!U&&(!($>0&&a<$)&&!(ae>0&&t<ae))}),[U,$,ae]),Ce=r.useMemo((function(){return o.map((function(e){var a=xe.find((function(a){return a.data.id===e}));return b({},a,{data:b({id:e},null==a?void 0:a.data,{hidden:oe.includes(e)})})}))}),[oe,o,xe]),Le=r.useMemo((function(){return ie.map((function(e){return[e,Y({bars:"keys"===e.dataFrom?Ce:xe,direction:e.direction,from:e.dataFrom,groupMode:L,layout:V,legendLabel:ne,reverse:B})]}))}),[ie,Ce,xe,L,V,ne,B]);return{bars:xe,barsWithValue:Se,xScale:pe,yScale:ye,getIndex:ue,getLabel:se,getTooltipLabel:ce,formatValue:he,getColor:ge,getBorderColor:ve,getLabelColor:fe,shouldRenderBarLabel:ke,hiddenIds:oe,toggleSerie:de,legendsWithData:Le}},O=["isInteractive","animate","motionConfig","theme","renderWrapper"],G=function(a){var i=a.data,l=a.indexBy,d=a.keys,u=a.margin,s=a.width,c=a.height,h=a.groupMode,g=a.layout,v=a.reverse,x=a.minValue,p=a.maxValue,y=a.valueScale,S=a.indexScale,C=a.padding,L=a.innerPadding,w=a.axisTop,V=a.axisRight,M=a.axisBottom,B=void 0===M?k.axisBottom:M,W=a.axisLeft,T=void 0===W?k.axisLeft:W,I=a.enableGridX,R=void 0===I?k.enableGridX:I,j=a.enableGridY,P=void 0===j?k.enableGridY:j,E=a.gridXValues,F=a.gridYValues,H=a.layers,A=void 0===H?k.layers:H,D=a.barComponent,X=void 0===D?k.barComponent:D,Y=a.enableLabel,O=a.label,G=a.labelSkipWidth,z=a.labelSkipHeight,K=a.labelTextColor,N=a.markers,_=void 0===N?k.markers:N,J=a.colorBy,Q=a.colors,U=a.defs,Z=void 0===U?k.defs:U,$=a.fill,ee=void 0===$?k.fill:$,ae=a.borderRadius,te=void 0===ae?k.borderRadius:ae,ie=a.borderWidth,ne=void 0===ie?k.borderWidth:ie,re=a.borderColor,oe=a.annotations,le=void 0===oe?k.annotations:oe,de=a.legendLabel,ue=a.tooltipLabel,se=a.valueFormat,ce=a.isInteractive,he=void 0===ce?k.isInteractive:ce,be=a.tooltip,ge=void 0===be?k.tooltip:be,ve=a.onClick,fe=a.onMouseEnter,me=a.onMouseLeave,xe=a.legends,pe=a.role,ye=void 0===pe?k.role:pe,Se=a.ariaLabel,ke=a.ariaLabelledBy,Ce=a.ariaDescribedBy,Le=a.isFocusable,we=void 0===Le?k.isFocusable:Le,Ve=a.barAriaLabel,Me=a.barAriaLabelledBy,Be=a.barAriaDescribedBy,We=a.initialHiddenIds,Te=n.useMotionConfig(),Ie=Te.animate,Re=Te.config,je=n.useDimensions(s,c,u),Pe=je.outerWidth,Ee=je.outerHeight,Fe=je.margin,He=je.innerWidth,Ae=je.innerHeight,De=q({indexBy:l,label:O,tooltipLabel:ue,valueFormat:se,colors:Q,colorBy:J,borderColor:re,labelTextColor:K,groupMode:h,layout:g,reverse:v,data:i,keys:d,minValue:x,maxValue:p,margin:Fe,width:He,height:Ae,padding:C,innerPadding:L,valueScale:y,indexScale:S,enableLabel:Y,labelSkipWidth:G,labelSkipHeight:z,legends:xe,legendLabel:de,initialHiddenIds:We}),Xe=De.bars,Ye=De.barsWithValue,qe=De.xScale,Oe=De.yScale,Ge=De.getLabel,ze=De.getTooltipLabel,Ke=De.getBorderColor,Ne=De.getLabelColor,_e=De.shouldRenderBarLabel,Je=De.toggleSerie,Qe=De.legendsWithData,Ue=o.useTransition(Ye,{keys:function(e){return e.key},from:function(e){return b({borderColor:Ke(e),color:e.color,height:0,labelColor:Ne(e),labelOpacity:0,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===g?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return{borderColor:Ke(e),color:e.color,height:e.height,labelColor:Ne(e),labelOpacity:1,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+e.y+")",width:e.width}},update:function(e){return{borderColor:Ke(e),color:e.color,height:e.height,labelColor:Ne(e),labelOpacity:1,labelX:e.width/2,labelY:e.height/2,transform:"translate("+e.x+", "+e.y+")",width:e.width}},leave:function(e){return b({borderColor:Ke(e),color:e.color,height:0,labelColor:Ne(e),labelOpacity:0,labelX:e.width/2,labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===g?{}:{labelX:0,labelY:e.height/2,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},config:Re,immediate:!Ie}),Ze=r.useMemo((function(){return{borderRadius:te,borderWidth:ne,enableLabel:Y,isInteractive:he,labelSkipWidth:G,labelSkipHeight:z,onClick:ve,onMouseEnter:fe,onMouseLeave:me,getTooltipLabel:ze,tooltip:ge,isFocusable:we,ariaLabel:Ve,ariaLabelledBy:Me,ariaDescribedBy:Be}}),[te,ne,Y,ze,he,z,G,ve,fe,me,ge,we,Ve,Me,Be]),$e=n.bindDefs(Z,Xe,ee,{dataKey:"data",targetKey:"data.fill"}),ea={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null};A.includes("annotations")&&(ea.annotations=t.jsx(f,{bars:Xe,annotations:le},"annotations")),A.includes("axes")&&(ea.axes=t.jsx(e.Axes,{xScale:qe,yScale:Oe,width:He,height:Ae,top:w,right:V,bottom:B,left:T},"axes")),A.includes("bars")&&(ea.bars=t.jsx(r.Fragment,{children:Ue((function(e,a){return r.createElement(X,b({},Ze,{bar:a,style:e,shouldRenderLabel:_e(a),label:Ge(a.data)}))}))},"bars")),A.includes("grid")&&(ea.grid=t.jsx(e.Grid,{width:He,height:Ae,xScale:R?qe:null,yScale:P?Oe:null,xValues:E,yValues:F},"grid")),A.includes("legends")&&(ea.legends=t.jsx(m,{width:He,height:Ae,legends:Qe,toggleSerie:Je},"legends")),A.includes("markers")&&(ea.markers=t.jsx(n.CartesianMarkers,{markers:_,width:He,height:Ae,xScale:qe,yScale:Oe},"markers"));var aa=r.useMemo((function(){return b({},Ze,{margin:Fe,innerWidth:He,innerHeight:Ae,width:s,height:c,bars:Xe,xScale:qe,yScale:Oe})}),[Ze,Fe,He,Ae,s,c,Xe,qe,Oe]);return t.jsx(n.SvgWrapper,{width:Pe,height:Ee,margin:Fe,defs:$e,role:ye,ariaLabel:Se,ariaLabelledBy:ke,ariaDescribedBy:Ce,isFocusable:we,children:A.map((function(e,a){var i;return"function"==typeof e?t.jsx(r.Fragment,{children:r.createElement(e,aa)},a):null!=(i=null==ea?void 0:ea[e])?i:null}))})},z=function(e){var a=e.isInteractive,i=void 0===a?k.isInteractive:a,r=e.animate,o=void 0===r?k.animate:r,l=e.motionConfig,d=void 0===l?k.motionConfig:l,u=e.theme,s=e.renderWrapper,c=g(e,O);return t.jsx(n.Container,{animate:o,isInteractive:i,motionConfig:d,renderWrapper:s,theme:u,children:t.jsx(G,b({isInteractive:i},c))})},K=["isInteractive","renderWrapper","theme"],N=function(e,a,t,i){return e.find((function(e){return n.isCursorInRect(e.x+a.left,e.y+a.top,e.width,e.height,t,i)}))},_=function(o){var d=o.data,u=o.indexBy,s=o.keys,c=o.margin,h=o.width,g=o.height,v=o.groupMode,f=o.layout,m=o.reverse,x=o.minValue,p=o.maxValue,y=o.valueScale,S=o.indexScale,k=o.padding,L=o.innerPadding,w=o.axisTop,V=o.axisRight,M=o.axisBottom,B=void 0===M?C.axisBottom:M,W=o.axisLeft,T=void 0===W?C.axisLeft:W,I=o.enableGridX,R=void 0===I?C.enableGridX:I,j=o.enableGridY,P=void 0===j?C.enableGridY:j,E=o.gridXValues,F=o.gridYValues,H=o.layers,A=void 0===H?C.layers:H,D=o.renderBar,X=void 0===D?function(e,a){var t=a.bar,i=t.color,n=t.height,r=t.width,o=t.x,l=t.y,d=a.borderColor,u=a.borderRadius,s=a.borderWidth,c=a.label,h=a.labelColor,b=a.shouldRenderLabel;if(e.fillStyle=i,s>0&&(e.strokeStyle=d,e.lineWidth=s),e.beginPath(),u>0){var g=Math.min(u,n);e.moveTo(o+g,l),e.lineTo(o+r-g,l),e.quadraticCurveTo(o+r,l,o+r,l+g),e.lineTo(o+r,l+n-g),e.quadraticCurveTo(o+r,l+n,o+r-g,l+n),e.lineTo(o+g,l+n),e.quadraticCurveTo(o,l+n,o,l+n-g),e.lineTo(o,l+g),e.quadraticCurveTo(o,l,o+g,l),e.closePath()}else e.rect(o,l,r,n);e.fill(),s>0&&e.stroke(),b&&(e.textBaseline="middle",e.textAlign="center",e.fillStyle=h,e.fillText(c,o+r/2,l+n/2))}:D,Y=o.enableLabel,O=o.label,G=o.labelSkipWidth,z=o.labelSkipHeight,K=o.labelTextColor,_=o.colorBy,J=o.colors,Q=o.borderRadius,U=void 0===Q?C.borderRadius:Q,Z=o.borderWidth,$=void 0===Z?C.borderWidth:Z,ee=o.borderColor,ae=o.annotations,te=void 0===ae?C.annotations:ae,ie=o.legendLabel,ne=o.tooltipLabel,re=o.valueFormat,oe=o.isInteractive,le=void 0===oe?C.isInteractive:oe,de=o.tooltip,ue=void 0===de?C.tooltip:de,se=o.onClick,ce=o.onMouseEnter,he=o.onMouseLeave,be=o.legends,ge=o.pixelRatio,ve=void 0===ge?C.pixelRatio:ge,fe=o.canvasRef,me=r.useRef(null),xe=n.useTheme(),pe=n.useDimensions(h,g,c),ye=pe.margin,Se=pe.innerWidth,ke=pe.innerHeight,Ce=pe.outerWidth,Le=pe.outerHeight,we=q({indexBy:u,label:O,tooltipLabel:ne,valueFormat:re,colors:J,colorBy:_,borderColor:ee,labelTextColor:K,groupMode:v,layout:f,reverse:m,data:d,keys:s,minValue:x,maxValue:p,margin:ye,width:Se,height:ke,padding:k,innerPadding:L,valueScale:y,indexScale:S,enableLabel:Y,labelSkipWidth:G,labelSkipHeight:z,legends:be,legendLabel:ie}),Ve=we.bars,Me=we.barsWithValue,Be=we.xScale,We=we.yScale,Te=we.getLabel,Ie=we.getTooltipLabel,Re=we.getBorderColor,je=we.getLabelColor,Pe=we.shouldRenderBarLabel,Ee=we.legendsWithData,Fe=l.useTooltip(),He=Fe.showTooltipFromEvent,Ae=Fe.hideTooltip,De=a.useComputedAnnotations({annotations:a.useAnnotations({data:Ve,annotations:te,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var a=e.width,t=e.height;return{width:a,height:t,size:Math.max(a,t)}}})}),Xe=r.useMemo((function(){return{borderRadius:U,borderWidth:$,enableLabel:Y,isInteractive:le,labelSkipWidth:G,labelSkipHeight:z,onClick:se,onMouseEnter:ce,onMouseLeave:he,getTooltipLabel:Ie,tooltip:ue,margin:ye,innerWidth:Se,innerHeight:ke,width:h,height:g,bars:Ve,xScale:Be,yScale:We}}),[U,$,Y,Ie,g,ke,Se,le,z,G,ye,se,ce,he,Ve,Be,We,ue,h]);r.useEffect((function(){var t,n=null==(t=me.current)?void 0:t.getContext("2d");me.current&&n&&(me.current.width=Ce*ve,me.current.height=Le*ve,n.scale(ve,ve),n.fillStyle=xe.background,n.fillRect(0,0,Ce,Le),n.translate(ye.left,ye.top),A.forEach((function(t){"grid"===t?"number"==typeof xe.grid.line.strokeWidth&&xe.grid.line.strokeWidth>0&&(n.lineWidth=xe.grid.line.strokeWidth,n.strokeStyle=xe.grid.line.stroke,R&&e.renderGridLinesToCanvas(n,{width:h,height:g,scale:Be,axis:"x",values:E}),P&&e.renderGridLinesToCanvas(n,{width:h,height:g,scale:We,axis:"y",values:F})):"axes"===t?e.renderAxesToCanvas(n,{xScale:Be,yScale:We,width:Se,height:ke,top:w,right:V,bottom:B,left:T,theme:xe}):"bars"===t?Me.forEach((function(e){X(n,{bar:e,borderColor:Re(e),borderRadius:U,borderWidth:$,label:Te(e.data),labelColor:je(e),shouldRenderLabel:Pe(e)})})):"legends"===t?Ee.forEach((function(e){var a=e[0],t=e[1];i.renderLegendToCanvas(n,b({},a,{data:t,containerWidth:Se,containerHeight:ke,theme:xe}))})):"annotations"===t?a.renderAnnotationsToCanvas(n,{annotations:De,theme:xe}):"function"==typeof t&&t(n,Xe)})),n.save())}),[B,T,V,w,Me,U,$,De,R,P,Re,Te,je,E,F,v,g,ke,Se,Xe,A,f,Ee,ye.left,ye.top,Le,Ce,ve,X,Be,We,m,Pe,xe,h]);var Ye=r.useCallback((function(e){if(Ve&&me.current){var a=n.getRelativeCursor(me.current,e),t=a[0],i=a[1],o=N(Ve,ye,t,i);void 0!==o?(He(r.createElement(ue,b({},o.data,{color:o.color,label:o.label,value:Number(o.data.value)})),e),"mouseenter"===e.type&&(null==ce||ce(o.data,e))):Ae()}}),[Ae,ye,ce,Ve,He,ue]),qe=r.useCallback((function(e){if(Ve&&me.current){Ae();var a=n.getRelativeCursor(me.current,e),t=a[0],i=a[1],r=N(Ve,ye,t,i);r&&(null==he||he(r.data,e))}}),[Ae,ye,he,Ve]),Oe=r.useCallback((function(e){if(Ve&&me.current){var a=n.getRelativeCursor(me.current,e),t=a[0],i=a[1],r=N(Ve,ye,t,i);void 0!==r&&(null==se||se(b({},r.data,{color:r.color}),e))}}),[ye,se,Ve]);return t.jsx("canvas",{ref:function(e){me.current=e,fe&&"current"in fe&&(fe.current=e)},width:Ce*ve,height:Le*ve,style:{width:Ce,height:Le,cursor:le?"auto":"normal"},onMouseEnter:le?Ye:void 0,onMouseMove:le?Ye:void 0,onMouseLeave:le?qe:void 0,onClick:le?Oe:void 0})},J=r.forwardRef((function(e,a){var i=e.isInteractive,r=e.renderWrapper,o=e.theme,l=g(e,K);return t.jsx(n.Container,{isInteractive:i,renderWrapper:r,theme:o,animate:!1,children:t.jsx(_,b({},l,{canvasRef:a}))})})),Q=r.forwardRef((function(e,a){return t.jsx(n.ResponsiveWrapper,{children:function(i){var n=i.width,r=i.height;return t.jsx(J,b({width:n,height:r},e,{ref:a}))}})}));exports.Bar=z,exports.BarCanvas=J,exports.BarItem=p,exports.ResponsiveBar=function(e){return t.jsx(n.ResponsiveWrapper,{children:function(a){var i=a.width,n=a.height;return t.jsx(z,b({width:i,height:n},e))}})},exports.ResponsiveBarCanvas=Q,exports.canvasDefaultProps=C,exports.defaultProps=S,exports.svgDefaultProps=k;
//# sourceMappingURL=nivo-bar.cjs.js.map
