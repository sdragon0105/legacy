{"ast":null,"code":"import _slicedToArray from\"E:/Work/legacy/legacy-frontend-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"E:/Work/legacy/legacy-frontend-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"E:\\\\Work\\\\legacy\\\\legacy-frontend-main\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import Prices from'./Prices';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";var cancelToken;var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(breed,legend,purity,stage,type,classes,callback){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(typeof cancelToken!==typeof undefined){cancelToken.cancel('Canceling previous request...');}cancelToken=axios.CancelToken.source();_context.next=5;return axios.get('https://p2eanalytics.com/crabada/getPrices',{params:{breedMin:stage?breed[0]:0,breedMax:stage?breed[1]:0,legendMin:stage?legend[0]:0,legendMax:stage?legend[1]:0,purityMin:stage?purity[0]:0,purityMax:stage?purity[1]:0,stage:stage,isOrigin:stage&&type[0]?1:0,isGenesis:stage&&type[1]?1:0,classes:stage?classes:false},cancelToken:cancelToken.token});case 5:response=_context.sent;callback(null,response.data.data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);callback(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchData(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _ref.apply(this,arguments);};}();var colors=['#FC252B','#108C8C','#C9B22E','#793024','#0068EC','#533FB4','#EC2C9E','#34A527'];function PricesContainer(){var _useState=useState([0,5]),_useState2=_slicedToArray(_useState,2),breed=_useState2[0],setBreed=_useState2[1];var _useState3=useState([0,6]),_useState4=_slicedToArray(_useState3,2),legend=_useState4[0],setLegend=_useState4[1];var _useState5=useState([0,6]),_useState6=_slicedToArray(_useState5,2),purity=_useState6[0],setPurity=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),stage=_useState8[0],setStage=_useState8[1];// 0 -> Egg, 1 -> Adult,\nvar _useState9=useState([0,0]),_useState10=_slicedToArray(_useState9,2),type=_useState10[0],setType=_useState10[1];// 0 -> Origin, 1 -> Genesis\nvar _useState11=useState([3]),_useState12=_slicedToArray(_useState11,2),classes=_useState12[0],setClasses=_useState12[1];// Empty = All\nvar _useState13=useState([[],[],[]]),_useState14=_slicedToArray(_useState13,2),graphData=_useState14[0],setGraphData=_useState14[1];var _useState15=useState([[]]),_useState16=_slicedToArray(_useState15,2),graphDataColors=_useState16[0],setGraphDataColors=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),graphMenu=_useState18[0],setGraphMenu=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],setLoading=_useState20[1];var _useState21=useState(true),_useState22=_slicedToArray(_useState21,2),applyChanges=_useState22[0],setApplyChanges=_useState22[1];useEffect(function(){setLoading(true);fetchData(breed,legend,purity,stage,type,classes,function(err,res){if(!err){var allArrays=[];var tempColors=[];if(stage===1){for(var i=0;i<res.length;i++){var currentArray=res[i];var temp=[];for(var j=0;j<currentArray.length;j++){if(currentArray[j].data.length>0&&(classes.length===0||classes.indexOf(j+1)>=0)){temp.push(currentArray[j]);tempColors.push(colors[j]);}}allArrays.push(temp);}}setGraphData(stage===1?allArrays:res);setGraphDataColors(stage===1?tempColors:['#1370F6']);setLoading(false);}});},[applyChanges]);return/*#__PURE__*/_jsx(Prices,{breed:breed,setBreed:setBreed,legend:legend,setLegend:setLegend,purity:purity,setPurity:setPurity,stage:stage,setStage:setStage,type:type,setType:setType,classes:classes,setClasses:setClasses,graphData:graphData,graphMenu:graphMenu,setGraphMenu:setGraphMenu,graphDataColors:graphDataColors,loading:loading,applyChanges:applyChanges,setApplyChanges:setApplyChanges});}export default PricesContainer;","map":{"version":3,"sources":["E:/Work/legacy/legacy-frontend-main/src/games/crabada/Prices/PricesContainer.js"],"names":["React","useEffect","useState","Prices","axios","cancelToken","fetchData","breed","legend","purity","stage","type","classes","callback","undefined","cancel","CancelToken","source","get","params","breedMin","breedMax","legendMin","legendMax","purityMin","purityMax","isOrigin","isGenesis","token","response","data","colors","PricesContainer","setBreed","setLegend","setPurity","setStage","setType","setClasses","graphData","setGraphData","graphDataColors","setGraphDataColors","graphMenu","setGraphMenu","loading","setLoading","applyChanges","setApplyChanges","err","res","allArrays","tempColors","i","length","currentArray","temp","j","indexOf","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Prices from './Prices'\nimport axios from 'axios'\n\nlet cancelToken\nconst fetchData = async (\n  breed,\n  legend,\n  purity,\n  stage,\n  type,\n  classes,\n  callback,\n) => {\n  try {\n    if (typeof cancelToken !== typeof undefined) {\n      cancelToken.cancel('Canceling previous request...')\n    }\n\n    cancelToken = axios.CancelToken.source()\n    const response = await axios.get(\n      'https://p2eanalytics.com/crabada/getPrices',\n      {\n        params: {\n          breedMin: stage ? breed[0] : 0,\n          breedMax: stage ? breed[1] : 0,\n          legendMin: stage ? legend[0] : 0,\n          legendMax: stage ? legend[1] : 0,\n          purityMin: stage ? purity[0] : 0,\n          purityMax: stage ? purity[1] : 0,\n          stage: stage,\n          isOrigin: stage && type[0] ? 1 : 0,\n          isGenesis: stage && type[1] ? 1 : 0,\n          classes: stage ? classes : false,\n        },\n        cancelToken: cancelToken.token,\n      },\n    )\n    callback(null, response.data.data)\n  } catch (e) {\n    callback(e)\n  }\n}\n\nconst colors = [\n  '#FC252B',\n  '#108C8C',\n  '#C9B22E',\n  '#793024',\n  '#0068EC',\n  '#533FB4',\n  '#EC2C9E',\n  '#34A527',\n]\nfunction PricesContainer() {\n  const [breed, setBreed] = useState([0, 5])\n  const [legend, setLegend] = useState([0, 6])\n  const [purity, setPurity] = useState([0, 6])\n\n  const [stage, setStage] = useState(1) // 0 -> Egg, 1 -> Adult,\n  const [type, setType] = useState([0, 0]) // 0 -> Origin, 1 -> Genesis\n  const [classes, setClasses] = useState([3]) // Empty = All\n\n  const [graphData, setGraphData] = useState([[], [], []])\n  const [graphDataColors, setGraphDataColors] = useState([[]])\n  const [graphMenu, setGraphMenu] = useState(0)\n  const [loading, setLoading] = useState(true)\n  const [applyChanges, setApplyChanges] = useState(true)\n  useEffect(() => {\n    setLoading(true)\n    fetchData(breed, legend, purity, stage, type, classes, (err, res) => {\n      if (!err) {\n        let allArrays = []\n        let tempColors = []\n        if (stage === 1) {\n          for (let i = 0; i < res.length; i++) {\n            let currentArray = res[i]\n            let temp = []\n            for (let j = 0; j < currentArray.length; j++) {\n              if (\n                currentArray[j].data.length > 0 &&\n                (classes.length === 0 || classes.indexOf(j + 1) >= 0)\n              ) {\n                temp.push(currentArray[j])\n                tempColors.push(colors[j])\n              }\n            }\n            allArrays.push(temp)\n          }\n        }\n        setGraphData(stage === 1 ? allArrays : res)\n        setGraphDataColors(stage === 1 ? tempColors : ['#1370F6'])\n        setLoading(false)\n      }\n    })\n  }, [applyChanges])\n\n  return (\n    <Prices\n      breed={breed}\n      setBreed={setBreed}\n      legend={legend}\n      setLegend={setLegend}\n      purity={purity}\n      setPurity={setPurity}\n      stage={stage}\n      setStage={setStage}\n      type={type}\n      setType={setType}\n      classes={classes}\n      setClasses={setClasses}\n      graphData={graphData}\n      graphMenu={graphMenu}\n      setGraphMenu={setGraphMenu}\n      graphDataColors={graphDataColors}\n      loading={loading}\n      applyChanges={applyChanges}\n      setApplyChanges={setApplyChanges}\n    />\n  )\n}\n\nexport default PricesContainer\n"]},"metadata":{},"sourceType":"module"}