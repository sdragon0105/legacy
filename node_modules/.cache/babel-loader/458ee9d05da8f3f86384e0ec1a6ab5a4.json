{"ast":null,"code":"var _jsxFileName = \"E:\\\\Work\\\\legacy\\\\legacy-frontend-main\\\\src\\\\games\\\\crabada\\\\Economy\\\\EconomyContainer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Economy from './Economy';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fetchData = async (table, timeRange, callback) => {\n  console.log('timeRange', timeRange);\n\n  try {\n    let response = await axios.get( // 'https://p2eanalytics.com/crabada/getEconomy',\n    // 'https://'+tokenData+'/economy/marketplace',\n    'http://localhost:8080/crabada/getEconomy', {\n      params: {\n        table: table,\n        timeRange: timeRange\n      }\n    });\n    callback(null, response.data.data);\n  } catch (e) {\n    callback(e);\n  }\n};\n\nfunction EconomyContainer() {\n  _s();\n\n  const [menus, setMenus] = useState([0, 0]);\n  const [timeFilter, setTimeFilter] = useState(['all', 'all']);\n  const [marketplaceData, setMarketplaceData] = useState([[]]);\n  const [tokenData, setTokenData] = useState([[]]);\n  const [tokenMinMax, setTokenMinMax] = useState([['auto', 'auto'], ['auto', 'auto']]);\n  const [marketMinMax, setMarketMinMax] = useState([['auto', 'auto'], ['auto', 'auto'], ['auto', 'auto']]);\n  useEffect(() => {\n    fetchData('MarketplaceSales', timeFilter[0], (err, market) => {\n      if (!err) {\n        let salesMin = 99999999999999;\n        let salesMax = -1;\n        let salesArray = market[0][0]['data'];\n\n        for (let i = 0; i < salesArray.length; i++) {\n          if (salesArray[i]['y'] < salesMin) {\n            salesMin = salesArray[i]['y'];\n          }\n\n          if (salesArray[i]['y'] > salesMax) {\n            salesMax = salesArray[i]['y'];\n          }\n        }\n\n        let averageMin = 99999999999999;\n        let averageMax = -1;\n        let averageArray = market[1][0]['data'];\n\n        for (let i = 0; i < averageArray.length; i++) {\n          if (averageArray[i]['y'] < averageMin) {\n            averageMin = averageArray[i]['y'];\n          }\n\n          if (averageArray[i]['y'] > averageMax) {\n            averageMax = averageArray[i]['y'];\n          }\n        }\n\n        let countMin = 99999999999999;\n        let countMax = -1;\n        let countArray = market[2][0]['data'];\n\n        for (let i = 0; i < countArray.length; i++) {\n          if (countArray[i]['y'] < countMin) {\n            countMin = countArray[i]['y'];\n          }\n\n          if (countArray[i]['y'] > countMax) {\n            countMax = countArray[i]['y'];\n          }\n        }\n\n        salesMin = salesMin * 0.4;\n        salesMax = salesMax * 1.2;\n        averageMin = averageMin * 0.4;\n        averageMax = averageMax * 1.2;\n        countMin = countMin * 0.4;\n        countMax = countMax * 1.2;\n        setMarketplaceData(market);\n        setMarketMinMax([[salesMin, salesMax], [averageMin, averageMax], [countMin, countMax]]);\n      }\n    });\n  }, [timeFilter[0]]);\n  useEffect(() => {\n    fetchData('TUS', timeFilter[1], (err, token) => {\n      if (!err) {\n        let netSupplyMin = 99999999999999;\n        let netSupplyMax = -1;\n        let supplyArray = token[0][0]['data'];\n\n        for (let i = 0; i < supplyArray.length; i++) {\n          if (supplyArray[i]['y'] < netSupplyMin) {\n            netSupplyMin = supplyArray[i]['y'];\n          }\n\n          if (supplyArray[i]['y'] > netSupplyMax) {\n            netSupplyMax = supplyArray[i]['y'];\n          }\n        }\n\n        netSupplyMax = netSupplyMax * 1.2;\n        netSupplyMin = netSupplyMin * 0.3;\n        setTokenData(token);\n        setTokenMinMax([[netSupplyMin, netSupplyMax], ['auto', 'auto']]);\n      }\n    });\n  }, [timeFilter[1]]);\n  return /*#__PURE__*/_jsxDEV(Economy, {\n    menus: menus,\n    setMenus: setMenus,\n    market: marketplaceData,\n    token: tokenData,\n    timeFilter: timeFilter,\n    setTimeFilter: setTimeFilter,\n    tokenMinMax: tokenMinMax,\n    marketMinMax: marketMinMax\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EconomyContainer, \"p+CoX6ZcRU6Ax6QojM9wp8Dc5E8=\");\n\n_c = EconomyContainer;\nexport default EconomyContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"EconomyContainer\");","map":{"version":3,"sources":["E:/Work/legacy/legacy-frontend-main/src/games/crabada/Economy/EconomyContainer.js"],"names":["React","useState","useEffect","useCallback","Economy","axios","fetchData","table","timeRange","callback","console","log","response","get","params","data","e","EconomyContainer","menus","setMenus","timeFilter","setTimeFilter","marketplaceData","setMarketplaceData","tokenData","setTokenData","tokenMinMax","setTokenMinMax","marketMinMax","setMarketMinMax","err","market","salesMin","salesMax","salesArray","i","length","averageMin","averageMax","averageArray","countMin","countMax","countArray","token","netSupplyMin","netSupplyMax","supplyArray"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport Economy from './Economy'\nimport axios from 'axios'\n\nconst fetchData = async (table, timeRange, callback) => {\n  console.log('timeRange', timeRange)\n  try {\n    let response = await axios.get(\n      // 'https://p2eanalytics.com/crabada/getEconomy',\n      // 'https://'+tokenData+'/economy/marketplace',\n      'http://localhost:8080/crabada/getEconomy',\n\n      {\n        params: {\n          table: table,\n          timeRange: timeRange,\n        },\n      },\n    );\n    callback(null, response.data.data)\n  } catch (e) {\n    callback(e)\n  }\n}\n\nfunction EconomyContainer() {\n  const [menus, setMenus] = useState([0, 0])\n  const [timeFilter, setTimeFilter] = useState(['all', 'all'])\n  const [marketplaceData, setMarketplaceData] = useState([[]])\n  const [tokenData, setTokenData] = useState([[]])\n  const [tokenMinMax, setTokenMinMax] = useState([\n    ['auto', 'auto'],\n    ['auto', 'auto'],\n  ])\n  const [marketMinMax, setMarketMinMax] = useState([\n    ['auto', 'auto'],\n    ['auto', 'auto'],\n    ['auto', 'auto'],\n  ])\n\n  useEffect(() => {\n    fetchData('MarketplaceSales', timeFilter[0], (err, market) => {\n      if (!err) {\n        let salesMin = 99999999999999\n        let salesMax = -1\n        let salesArray = market[0][0]['data']\n        for (let i = 0; i < salesArray.length; i++) {\n          if (salesArray[i]['y'] < salesMin) {\n            salesMin = salesArray[i]['y']\n          }\n          if (salesArray[i]['y'] > salesMax) {\n            salesMax = salesArray[i]['y']\n          }\n        }\n        let averageMin = 99999999999999\n        let averageMax = -1\n        let averageArray = market[1][0]['data']\n        for (let i = 0; i < averageArray.length; i++) {\n          if (averageArray[i]['y'] < averageMin) {\n            averageMin = averageArray[i]['y']\n          }\n          if (averageArray[i]['y'] > averageMax) {\n            averageMax = averageArray[i]['y']\n          }\n        }\n        let countMin = 99999999999999\n        let countMax = -1\n        let countArray = market[2][0]['data']\n        for (let i = 0; i < countArray.length; i++) {\n          if (countArray[i]['y'] < countMin) {\n            countMin = countArray[i]['y']\n          }\n          if (countArray[i]['y'] > countMax) {\n            countMax = countArray[i]['y']\n          }\n        }\n\n        salesMin = salesMin * 0.4\n        salesMax = salesMax * 1.2\n        averageMin = averageMin * 0.4\n        averageMax = averageMax * 1.2\n        countMin = countMin * 0.4\n        countMax = countMax * 1.2\n\n        setMarketplaceData(market)\n        setMarketMinMax([\n          [salesMin, salesMax],\n          [averageMin, averageMax],\n          [countMin, countMax],\n        ])\n      }\n    })\n  }, [timeFilter[0]])\n  useEffect(() => {\n    fetchData('TUS', timeFilter[1], (err, token) => {\n      if (!err) {\n        let netSupplyMin = 99999999999999\n        let netSupplyMax = -1\n\n        let supplyArray = token[0][0]['data']\n        for (let i = 0; i < supplyArray.length; i++) {\n          if (supplyArray[i]['y'] < netSupplyMin) {\n            netSupplyMin = supplyArray[i]['y']\n          }\n          if (supplyArray[i]['y'] > netSupplyMax) {\n            netSupplyMax = supplyArray[i]['y']\n          }\n        }\n\n        netSupplyMax = netSupplyMax * 1.2\n        netSupplyMin = netSupplyMin * 0.3\n\n        setTokenData(token)\n        setTokenMinMax([\n          [netSupplyMin, netSupplyMax],\n          ['auto', 'auto'],\n        ])\n      }\n    })\n  }, [timeFilter[1]])\n  return (\n    <Economy\n      menus={menus}\n      setMenus={setMenus}\n      market={marketplaceData}\n      token={tokenData}\n      timeFilter={timeFilter}\n      setTimeFilter={setTimeFilter}\n      tokenMinMax={tokenMinMax}\n      marketMinMax={marketMinMax}\n    />\n  )\n}\n\nexport default EconomyContainer\n"]},"metadata":{},"sourceType":"module"}